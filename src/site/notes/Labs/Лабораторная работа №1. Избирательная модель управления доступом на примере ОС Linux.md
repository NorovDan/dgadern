---
{"dg-publish":true,"permalink":"/labs/laboratornaya-rabota-1-izbiratelnaya-model-upravleniya-dostupom-na-primere-os-linux/"}
---


---

**ФИО:** 2022-ФГиИБ-ИБ-1б Воронов Даниил Алексеевич 

---


### 1. Создание пользователей

**1.1. Создать 3 новых пользвателя (user1, user2, user3). Создать для них домашние директории и установить shell-оболочку по умолчанию (/bin/sh)**

![Pasted image 20250212003641.png](/img/user/Pasted%20image%2020250212003641.png)
<div style="text-align: center;">
  Рисунок 1 - Создание трех пользователей
</div>

С помощью данных команд создаем пользователей **user1**, **user2**, **user3**. Флагом `-h` задаем домашнюю директорию, а `-s` устанавливаем оболочку. Также устанавливаем пароли для этих пользователей. 

**1.2. Проверить, что пользователи и домашние директории были созданы. Проверить группы, которым принадлежат пользователи.**

![Pasted image 20250212004413.png](/img/user/Pasted%20image%2020250212004413.png)
<div style="text-align: center;">
  Рисунок 2 - Просмотр файла /etc/passwd
</div>

![Pasted image 20250212004451.png](/img/user/Pasted%20image%2020250212004451.png)
<div style="text-align: center;">
  Рисунок 3 - Просмотр файла /etc/group
</div>

Для только что созданных пользователей были установлены группы с GID, где для **user1** был присвоен **1000**, **user2** - **1001**, **user3** - **1002**

**1.3. Просмотреть файл /etc/shadow, объяснить его структуру.**

![Pasted image 20250212004820.png](/img/user/Pasted%20image%2020250212004820.png)
<div style="text-align: center;">
  Рисунок 4 - Просмотр файла /etc/shadow
</div>

В данном файле хранится информация о пользователяхm где: 
1. Имя пользователя 
2.  Хешированный пароль
3. Число дней прошедших с 1 января 1970 года
4. Минимальное количество дней между изменениями пароля
5. Максимальное количество дней, после которого пароль должен быть изменен
6. Количество дней до истечения срока действия пароля, когда пользователь будет предупрежден
7. Количество дней после истечения срока действия пароля, после которых аккаунт будет отключен
8. Дата истечения срока действия аккаунта

Здесь используется хешированный пароль с помощью алгоритмы **SHA-512**, так как он хешированный парольный начинается с префикса `$6`

![Pasted image 20250212010125.png](/img/user/Pasted%20image%2020250212010125.png)
<div style="text-align: center;">
  Рисунок 5 - Изменение пароля для user1 и просмотр файла /etc/shadow
</div>

После смены пароля изменился и хешированный пароль 

**1.4. Создайте новую группу, которая будет включать двух из трех пользователей (user1, user2). Удалите группы тех пользователей, которых вы объединили (user1, user2).**

![Pasted image 20250212012804.png](/img/user/Pasted%20image%2020250212012804.png)
<div style="text-align: center;">
  Рисунок 6 - Создание группы work и добавление в нее user1, user2
</div>

![Pasted image 20250212013117.png](/img/user/Pasted%20image%2020250212013117.png)
<div style="text-align: center;">
  Рисунок 7 - Через cat /etc/group проверяем, что пользователи есть в группе
</div>

Через `nano etc/passwd` меняем GID у пользователей **user1** и **user2** на GID созданной группы - 1003 

![Pasted image 20250212013455.png](/img/user/Pasted%20image%2020250212013455.png)
<div style="text-align: center;">
  Рисунок 8 - Удаление группы пользователей
</div>
#### 2. Разрешения

**2.1. Авторизуйтесь под первым пользователем (user1). Создайте файл в домашней директории пользователя, проверьте разрешения по умолчанию.**

Через passwd user1 заходим в пользователя:

![Pasted image 20250212013921.png](/img/user/Pasted%20image%2020250212013921.png)
<div style="text-align: center;">
  Рисунок 9 - Заходим под user1
</div>

![Pasted image 20250212014004.png](/img/user/Pasted%20image%2020250212014004.png)
<div style="text-align: center;">
  Рисунок 10 - Создаем файл work.txt и проверяем разрешение 
</div>

**rw-** обозначает, что user1 может читать и писать в файле, `r--` - пользователи той же группы, что и user1, могут только читать файл, `r--` - остальные пользователи могут только читать

**2.2. Измените права таким образом, чтобы пользователь той же группы (user2) мог редактировать файл, а отдельный (user3) - не мог видеть и редактировать.**

**2.3. Измените права на файл таким образом, чтобы владелец (user1) и отдельный пользователь (user3) могли читать и редактировать файл, а второй пользователь (user2) - нет.**


**2.4. Создайте директорию, поместите в нее несколько файлов. Повторите шаг 2.2 и 2.3 для директории и файлов внутри нее.**


**2.5. Создайте скрипт на ЯП Python с расширением .py. Задайте ему шебанг. Попробуйте запустить скрипт самостоятельно, без вызова интерпретатора.**


#### 3. Специальные разрешения

**3.1. Что делает следующая команда?**

```
chmod 4762 filename
```


**3.2. Зайдите под первым пользователем (user1) и создайте директорию (например, dir1), внутрь поместите несколько исполняемых скриптов с расщирением .py. Для этой директории рекурсивно установите UID, GID и Sticky Bit. Дайте скриптам права на исполнение.**


**3.3. Удалите права на исполнения для всего в домашней директории.**


**3.4. Установите для созданной директории (dir1) права таким образом, чтобы пользователи из других групп могли осуществлять навигацию и читать файлы внутри.**


**3.5. Авторизуйтесь в системе под вторым пользователем (user2) и создайте директорию {user2}_share. Установите разрешения таким образом, чтобы второй пользователь мог делиться файлами с первым (user1) и отдельным (user3)**.


**3.6. Создайте файл sensetive_data от имени второго пользователя (user2) и запишите в него какую-либо текстовую информацию. Уберите разрешения для группы и всех остальных.**





